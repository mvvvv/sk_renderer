# Dear ImGui Backend for sk_renderer

This directory contains the sk_renderer backend implementation for Dear ImGui, along with all necessary support files.

## Files

### Backend Implementation
- **`imgui_impl_sk_renderer.h`** - C-compatible header with backend API
- **`imgui_impl_sk_renderer.cpp`** - Backend implementation (C++)
- **`imgui_sdl2_wrapper.cpp`** - Thin C wrapper for ImGui's SDL2 backend

### Shader
- **`imgui.hlsl`** - HLSL shader for rendering ImGui (vertex + fragment)
- **`imgui.hlsl.h`** - Auto-generated header file containing compiled shader binary (generated by skshaderc at build time)

## Build Process

The shader is compiled to a header file during the build process via CMake:

```cmake
skshaderc_compile_headers(sk_renderer_test ${CMAKE_CURRENT_SOURCE_DIR}/example/imgui_backend "-e -t s"
    example/imgui_backend/imgui.hlsl
)
```

This generates `imgui.hlsl.h` with the shader embedded as a byte array (`sks_imgui_hlsl`), which is included directly in the backend C++ file. This eliminates the runtime dependency on file IO.

## Key Features

- **Zero file I/O**: Shader is embedded at compile time
- **No external dependencies**: Self-contained (besides Dear ImGui and sk_renderer)
- **Two-phase rendering**:
  - `PrepareDrawData()` - Upload mesh data (must be called OUTSIDE render pass)
  - `RenderDrawData()` - Draw ImGui (must be called INSIDE render pass)
- **Dynamic buffer resizing**: Automatically grows buffers as needed
- **Proper Vulkan semantics**: Respects command buffer recording rules

## Usage

See [`main.c`](../main.c) and [`app.c`](../app.c) for integration examples.

Basic lifecycle:
```c
// Initialize
ImGui_ImplSDL2_InitForVulkan(window);
ImGui_ImplSkRenderer_Init();

// Per frame
ImGui_ImplSDL2_NewFrame();
ImGui_ImplSkRenderer_NewFrame();
igNewFrame();

// Build UI
igShowDemoWindow(&show_demo);

// Render
igRender();
ImGui_ImplSkRenderer_PrepareDrawData();  // Outside render pass
skr_renderer_begin_pass(...);
ImGui_ImplSkRenderer_RenderDrawData(width, height);  // Inside render pass
skr_renderer_end_pass();

// Cleanup
ImGui_ImplSkRenderer_Shutdown();
ImGui_ImplSDL2_Shutdown();
```

## License

SPDX-License-Identifier: MIT
